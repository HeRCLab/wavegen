version: 2.1

executors:
  linux:
    docker:
      - image: circleci/golang:1.14
      - image: circleci/golang:1.13
      - image: circleci/golang:latest

jobs:
  test:
    parameters:
      os:
        type: executor
    executor: << parameters.os >>
    steps:
      - checkout
      - run: go get -u golang.org/x/lint/golint
      - run: make clean
      - run: make test
      - run: make lint


workflows:
  all-tests:
    jobs:
       -test:
         matrix:
           parameters:
             os: [linux]
